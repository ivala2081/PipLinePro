[Unit]
Description=PipLinePro Flask Application
After=network.target

[Service]
Type=exec
User=pipline
Group=pipline
WorkingDirectory=/opt/piplinepro
Environment=PATH=/opt/piplinepro/venv/bin
Environment=FLASK_ENV=production
Environment=PYTHONPATH=/opt/piplinepro
ExecStart=/opt/piplinepro/venv/bin/gunicorn --config deployment/gunicorn_config.py app:app
ExecReload=/bin/kill -s HUP $MAINPID
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal
SyslogIdentifier=piplinepro

# Security settings
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ReadWritePaths=/opt/piplinepro
ProtectHome=true

[Install]
WantedBy=multi-user.target
